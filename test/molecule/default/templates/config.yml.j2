nodes:
{% if 'indexer' in group_names %}
  indexer:
    - name: {{ inventory_hostname }}
      ip: {{ ansible_host }}
{% elif 'server' in group_names %}
  server:
    - name: {{ inventory_hostname }}
      ip: {{ ansible_host }}
{% elif 'dashboard' in group_names %}
  dashboard:
    - name: {{ inventory_hostname }}
      ip: {{ ansible_host }}
{% endif %}

# DEBUG: Rendering for {{ inventory_hostname }}
# DEBUG: group_names = {{ group_names }}
# DEBUG: role = {% if 'indexer' in group_names %}indexer{% elif 'server' in group_names %}server{% elif 'dashboard' in group_names %}dashboard{% else %}unknown{% endif %}
# DEBUG: IP = {{ ansible_host }}
